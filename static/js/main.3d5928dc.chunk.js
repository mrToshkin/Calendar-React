(this["webpackJsonpreact-celendar"]=this["webpackJsonpreact-celendar"]||[]).push([[0],{10:function(e,t,a){e.exports=a(20)},15:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),s=a.n(l),o=(a(15),a(5)),m=a(6),c=a(7),i=a(9),u=a(8),d=r.a.createContext(),v=a(1),E=a.n(v),h=(a(17),a(2)),f=function(){var e=r.a.useContext(d),t=e.on,a=e.month,n=e.year;return r.a.createElement("div",{className:"calendar__header"},r.a.createElement("div",{className:"calendar__controls"},r.a.createElement("div",{className:"calendar__controls-months-case"},r.a.createElement("button",{className:"calendar__controls-button calendar__controls-button-left button-reset",onClick:t.header.month.prev},r.a.createElement("span",null,"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446")),r.a.createElement("select",{name:"month",id:"month",value:E()().month(a).format("MMMM"),onChange:t.header.month.select,className:"calendar__controls-select button-reset"},E.a.months().map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("button",{className:"calendar__controls-button calendar__controls-button-right button-reset",onClick:t.header.month.next},r.a.createElement("span",null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"calendar__controls-years-case"},r.a.createElement("button",{className:"calendar__controls-button calendar__controls-button-left button-reset",onClick:t.header.year.prev},r.a.createElement("span",null,"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0433\u043e\u0434")),r.a.createElement("select",{name:"year",id:"year",value:n,onChange:t.header.year.select,className:"calendar__controls-select button-reset"},Object(h.a)(Array(10)).map((function(e,t){return E()().year(n+t-4).format("YYYY")})).map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),r.a.createElement("button",{className:"calendar__controls-button calendar__controls-button-right button-reset",onClick:t.header.year.next},r.a.createElement("span",null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0433\u043e\u0434")))))},_=function(){var e=r.a.useContext(d).events;return r.a.createElement("div",{className:"calendar__footer"},Object.keys(e).length>0?r.a.createElement("p",{className:"calendar__footer-title--has-events"},"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f."):r.a.createElement("p",{className:"calendar__footer-title--no-events"},"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u0439."))},b=function(e){var t=r.a.useContext(d).on,a=["calendar__day"];return e.markDay.unmonth&&a.push("calendar__day--unmonth"),e.markDay.today&&a.push("calendar__day--today"),e.markDay.hasEvents&&a.push("calendar__day--events"),r.a.createElement("td",{className:a.join(" "),onClick:t.day.show.bind(null,e.week.id)},e.week.day)},y=function(){var e=r.a.useContext(d),t=e.on,a=e.id,n=e.events,l=e.hasEvents;return r.a.createElement("div",null,r.a.createElement("ul",{className:"events__ul"},l(a)?n[a].map((function(e,n){return r.a.createElement("li",{onDragStart:function(e){return t.event.drag.start(e,n)},onDrop:function(e){t.event.drag.drop(e,n),e.currentTarget.classList.remove("events__li--dng")},onDragOver:function(e){e.currentTarget.classList.add("events__li--dng"),e.preventDefault()},onDragLeave:function(e){return e.currentTarget.classList.remove("events__li--dng")},draggable:!0,className:"events__li",key:n+"."+a},r.a.createElement("button",{className:"events__item button-reset",onClick:t.event.show.bind(null,a,n)},r.a.createElement("span",{className:"events__item-time"},""!==e.time?e.time:"-- : --"),r.a.createElement("span",{className:"events__item-title"},e.title)),r.a.createElement("button",{className:"events__item-btn-remove button-reset",onClick:t.event.remove.bind(null,a,n)},r.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435")))})):r.a.createElement("p",null,"\u041d\u0435\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u0439.")))},g=function(e){var t=e.setting,a=t.submit,n=t.input,l=t.value,s=t.title,o=t.members,m=t.time,c=t.textArea,i=t.textSubmit;return r.a.createElement("form",{className:"form",method:"post",onSubmit:a},r.a.createElement("label",{htmlFor:s},"\u0417\u0430\u0433\u043e\u0432\u043e\u043a: "),r.a.createElement("input",{type:"text",name:s,id:s,defaultValue:l.title,className:"form__input-text input-reset",onChange:n,required:!0}),r.a.createElement("label",{htmlFor:o},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438:"),r.a.createElement("input",{type:"text",name:o,id:o,defaultValue:l.members,className:"form__input-text input-reset",onChange:n}),r.a.createElement("label",{htmlFor:m},"\u0412\u0440\u0435\u043c\u044f:",r.a.createElement("input",{type:"time",name:m,id:m,defaultValue:l.time,className:"form__time input-reset",onChange:n})),r.a.createElement("label",{htmlFor:c},"\u0421\u043e\u0431\u044b\u0442\u0438\u0435:"),r.a.createElement("textarea",{name:c,id:c,defaultValue:l.text,className:"form__textarea input-reset",onChange:n}),r.a.createElement("button",{type:"submit",className:"form__submit button-reset"},i))},p=function(){var e=r.a.useContext(d),t=e.on,a=e.events,n=e.id,l=e.flagEdit,s=e.eventIndex,o=a[n][s],m={title:"titleEdit",members:"membersEdit",time:"timeEdit",textArea:"textEdit",textSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",value:o,input:t.form.input,submit:t.form.submit.edit};return r.a.createElement("div",{className:"modal__event"},l&&o?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"modal__h2"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435:"),r.a.createElement(g,{setting:m}),r.a.createElement("button",{className:"modal__btn-close button-reset",onClick:t.edit.hide},r.a.createElement("span",null,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"))):o?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"modal__h2 modal__h2--event-title"}," ",o.title),r.a.createElement("div",{className:"modal__line"}),r.a.createElement("p",null,r.a.createElement("strong",null,"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438:")," ",o.members),r.a.createElement("div",{className:"modal__line"}),r.a.createElement("p",null,r.a.createElement("strong",null,"\u0412\u0440\u0435\u043c\u044f:")," ",o.time),r.a.createElement("div",{className:"modal__line"}),r.a.createElement("p",null,r.a.createElement("strong",null,"\u0421\u043e\u0431\u044b\u0442\u0438\u0435:")," ",o.text),r.a.createElement("button",{className:"modal__btn-edit button-reset",onClick:t.edit.show},r.a.createElement("span",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435")),r.a.createElement("button",{className:"modal__btn-close button-reset",onClick:t.event.hide},r.a.createElement("span",null,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"modal__h2 modal__h2--event-title"},"\u0421\u043e\u0431\u044b\u0442\u0438\u0435",r.a.createElement("br",null),"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),r.a.createElement("button",{className:"modal__btn-close button-reset",onClick:t.event.hide},r.a.createElement("span",null,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"))))},N=function(){var e=r.a.useContext(d),t=e.on,a=e.id,n=e.flagEvent,l={title:"title",members:"members",time:"time",textArea:"text",textSubmit:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435",value:{title:"",members:"",time:"",text:""},input:t.form.input,submit:t.form.submit.add};return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__overlay",onClick:function(){t.day.hide(),t.event.hide()}}),n&&r.a.createElement(p,null),r.a.createElement("div",{className:"modal__day"},r.a.createElement("h2",{className:"modal__h2"},E()(a).format("D MMMM YYYY")),r.a.createElement(g,{setting:l}),r.a.createElement("div",{className:"modal__line"}),r.a.createElement(y,null),r.a.createElement("button",{className:"modal__btn-close button-reset",onClick:t.day.hide},r.a.createElement("span",null,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0434\u0435\u043d\u044c"))))};function x(e,t){var a=E()([t,e]).startOf("month").startOf("week").clone(),n=!0;function r(e){this.day=e._d.getDate(),this.month=e._d.getMonth()+1,this.year=e._d.getFullYear(),this.id="".concat(this.year,"-").concat(this.month,"-").concat(this.day)}return Object(h.a)(Array(5)).map((function(){return Object(h.a)(Array(7)).map((function(){return n?(n=!1,new r(a)):(a._d.setDate(a._d.getDate()+1),new r(a))}))}))}a(18);var S=["\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441"],k=E()().date(),C=E()().month(),D=E()().year();E.a.locale("ru");var w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).on={mock:{add:function(e,t){var a=n.state.events;a[e]?a[e].push(t):a[e]=[t],n.setState({events:a,title:"",members:"",time:"",text:""}),localStorage.setItem("calendar",JSON.stringify(a))},get:function(e){var t=n.state.events[e];return console.log(t),console.log(n.state),console.log(n.state.events),t}},header:{month:{prev:function(){var e=n.state,t=e.month,a=e.year;0===t?n.setState({month:11,days:x(11,a-1),year:a-1}):n.setState({month:t-1,days:x(t-1,a)})},select:function(e){var t=E()(e.target.value,"MMMM").month(),a=n.state.year;n.setState({month:t,days:x(t,a)})},next:function(){var e=n.state,t=e.month,a=e.year;11===t?n.setState({month:0,days:x(0,a+1),year:a+1}):n.setState({month:t+1,days:x(t+1,a)})}},year:{prev:function(){var e=n.state,t=e.month,a=e.year;n.setState({year:a-1,days:x(t,a-1)})},select:function(e){var t=n.state.month,a=Number(e.target.value);n.setState({year:a,days:x(t,a)})},next:function(){var e=n.state,t=e.month,a=e.year;n.setState({year:a+1,days:x(t,a+1)})}}},day:{show:function(e){return n.setState({flagDay:!0,id:e})},hide:function(){return n.setState({flagDay:!1})}},event:{show:function(e,t){return n.setState({flagEvent:!0,flagEdit:!1,id:e,eventIndex:t})},hide:function(){return n.setState({flagEvent:!1,flagEdit:!1})},remove:function(e,t){var a=n.state.events,r=n.methods.hasEvents;a[e].splice(t,1),r(e)||(delete a[e],n.setState({flagEvent:!1,flagEdit:!1})),n.setState({events:a}),localStorage.setItem("calendar",JSON.stringify(a))},drag:{start:function(e,t){return n.setState({eventIndex:t})},drop:function(e,t){var a=n.state,r=a.id,l=a.events,s=a.eventIndex,o=[l[r][t],l[r][s]];l[r][s]=o[0],l[r][t]=o[1],e.preventDefault(),n.setState({events:l}),localStorage.setItem("calendar",JSON.stringify(l))}}},edit:{show:function(){return n.setState({flagEdit:!0,titleEdit:"",membersEdit:"",timeEdit:"",textEdit:""})},hide:function(){return n.setState({flagEdit:!1})}},form:{input:function(e){return n.setState(Object(o.a)({},e.target.name,e.target.value))},submit:{add:function(e){var t=n.state,a=t.events,r=t.id,l={title:t.title,members:t.members,time:t.time,text:t.text};a[r]?a[r].push(l):a[r]=[l],e.preventDefault(),e.target.reset(),n.setState({events:a,title:"",members:"",time:"",text:""}),localStorage.setItem("calendar",JSON.stringify(a))},edit:function(e){var t=n.state,a=t.events,r=t.id,l=t.titleEdit,s=t.membersEdit,o=t.timeEdit,m=t.textEdit,c=t.eventIndex,i=a[r][c],u=function(e,t){return""===e?t:e},d={title:u(l,i.title),members:u(s,i.members),time:u(o,i.time),text:u(m,i.text)};a[r].splice(c,1,d),e.preventDefault(),e.target.reset(),n.setState({events:a,titleEdit:"",membersEdit:"",timeEdit:"",textEdit:"",flagEdit:!1}),localStorage.setItem("calendar",JSON.stringify(a))}}}},n.methods={hasEvents:function(e){return!!Array.isArray(n.state.events[e])&&n.state.events[e].some((function(e){return e}))},markDay:function(e){return{unmonth:e.month-1!==n.state.month,today:e.day===k&&e.month-1===C&&e.year===D,hasEvents:n.methods.hasEvents(e.id)}}},n.state={days:x(C,D),day:k,month:C,year:D,events:{},flagDay:!1,flagEvent:!1,flagEdit:!1,id:"",eventIndex:null,title:"",members:"",time:"",text:"",titleEdit:"",membersEdit:"",timeEdit:"",textEdit:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("calendar")?JSON.parse(localStorage.getItem("calendar")):{};this.setState({events:e})}},{key:"render",value:function(){var e=this.state,t=e.days,a=e.day,n=e.month,l=e.year,s=e.events,o=e.flagDay,m=e.flagEvent,c=e.flagEdit,i=e.eventIndex,u=e.id,v=this.methods,E=v.hasEvents,h=v.markDay,y=this.on;return r.a.createElement(d.Provider,{value:{on:y,day:a,days:t,month:n,year:l,events:s,id:u,flagEvent:m,eventIndex:i,flagEdit:c,hasEvents:E}},r.a.createElement("div",{className:"calendar"},r.a.createElement(f,null),r.a.createElement("table",{className:"calendar__body"},r.a.createElement("thead",null,r.a.createElement("tr",null,S.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e){return r.a.createElement(b,{markDay:h(e),week:e,key:e.id})})))})))),o&&r.a.createElement(N,null),r.a.createElement(_,null)))}}]),a}(r.a.Component);a(19);var O=function(){return r.a.createElement(w,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.3d5928dc.chunk.js.map